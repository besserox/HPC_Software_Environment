
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Xavier Besseron">
      
      
        <link rel="canonical" href="https://besserox.github.io/HPC_Software_Environment/command_line_hpc/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../compilation/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.6">
    
    
      
        <title>Command Line Environment on HPC - Master in HPC - HPC Software Environment - Practicals</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#command-line-environment-on-hpc" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Master in HPC - HPC Software Environment - Practicals" class="md-header__button md-logo" aria-label="Master in HPC - HPC Software Environment - Practicals" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Master in HPC - HPC Software Environment - Practicals
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Command Line Environment on HPC
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Master in HPC - HPC Software Environment - Practicals" class="md-nav__button md-logo" aria-label="Master in HPC - HPC Software Environment - Practicals" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Master in HPC - HPC Software Environment - Practicals
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Command Line Environment on HPC
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Command Line Environment on HPC
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Objectives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instructions" class="md-nav__link">
    <span class="md-ellipsis">
      Instructions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#report" class="md-nav__link">
    <span class="md-ellipsis">
      Report
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-1-accessing-the-hpc-platform" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 1: Accessing the HPC platform
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 1: Accessing the HPC platform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-of-ssh-access" class="md-nav__link">
    <span class="md-ellipsis">
      Setup of SSH Access
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-to-hpc-access" class="md-nav__link">
    <span class="md-ellipsis">
      Connection to HPC Access
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-2-exploring-the-command-line-and-the-shell" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 2: Exploring the command line and the shell
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 2: Exploring the command line and the shell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-files-directories-and-storage-usage" class="md-nav__link">
    <span class="md-ellipsis">
      About files, directories and storage usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-of-commands-and-files" class="md-nav__link">
    <span class="md-ellipsis">
      Type of commands and files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-3-setting-up-git-and-downloading-the-materials" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 3: Setting up Git and downloading the materials
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 3: Setting up Git and downloading the materials">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#first-commit-and-push" class="md-nav__link">
    <span class="md-ellipsis">
      First commit and push
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-4-using-a-compute-node-interactively" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 4: Using a compute node interactively
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 4: Using a compute node interactively">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#information-about-the-computing-platform" class="md-nav__link">
    <span class="md-ellipsis">
      Information about the computing platform
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-your-reservation" class="md-nav__link">
    <span class="md-ellipsis">
      Finding your reservation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-to-a-compute-node" class="md-nav__link">
    <span class="md-ellipsis">
      Connection to a compute node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-and-using-software" class="md-nav__link">
    <span class="md-ellipsis">
      Finding and using software
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-a-parallel-application" class="md-nav__link">
    <span class="md-ellipsis">
      Running a parallel application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-5-submitting-an-hpc-job" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 5: Submitting an HPC job
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 5: Submitting an HPC job">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifying-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-a-submission-script-for-slurm" class="md-nav__link">
    <span class="md-ellipsis">
      Writing a submission script for SLURM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-submission" class="md-nav__link">
    <span class="md-ellipsis">
      Job submission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Job monitoring
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-more-computing-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Using more computing resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-6-final-questions-and-report-submission" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 6: Final questions and report submission
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 6: Final questions and report submission">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#final-submission" class="md-nav__link">
    <span class="md-ellipsis">
      Final submission ⚠️
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Additional Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Additional Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-help" class="md-nav__link">
    <span class="md-ellipsis">
      Getting help
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dont-fall-behind-self-learning-materials" class="md-nav__link">
    <span class="md-ellipsis">
      Don't Fall Behind: Self-learning Materials
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../compilation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compilation on HPC
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../debugging_profiling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging & Profiling
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../software_installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing Software on HPC
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing on HPC with ReFrame
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Objectives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instructions" class="md-nav__link">
    <span class="md-ellipsis">
      Instructions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#report" class="md-nav__link">
    <span class="md-ellipsis">
      Report
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-1-accessing-the-hpc-platform" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 1: Accessing the HPC platform
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 1: Accessing the HPC platform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-of-ssh-access" class="md-nav__link">
    <span class="md-ellipsis">
      Setup of SSH Access
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-to-hpc-access" class="md-nav__link">
    <span class="md-ellipsis">
      Connection to HPC Access
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-2-exploring-the-command-line-and-the-shell" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 2: Exploring the command line and the shell
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 2: Exploring the command line and the shell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-files-directories-and-storage-usage" class="md-nav__link">
    <span class="md-ellipsis">
      About files, directories and storage usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-of-commands-and-files" class="md-nav__link">
    <span class="md-ellipsis">
      Type of commands and files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-3-setting-up-git-and-downloading-the-materials" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 3: Setting up Git and downloading the materials
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 3: Setting up Git and downloading the materials">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#first-commit-and-push" class="md-nav__link">
    <span class="md-ellipsis">
      First commit and push
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-4-using-a-compute-node-interactively" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 4: Using a compute node interactively
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 4: Using a compute node interactively">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#information-about-the-computing-platform" class="md-nav__link">
    <span class="md-ellipsis">
      Information about the computing platform
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-your-reservation" class="md-nav__link">
    <span class="md-ellipsis">
      Finding your reservation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-to-a-compute-node" class="md-nav__link">
    <span class="md-ellipsis">
      Connection to a compute node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-and-using-software" class="md-nav__link">
    <span class="md-ellipsis">
      Finding and using software
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-a-parallel-application" class="md-nav__link">
    <span class="md-ellipsis">
      Running a parallel application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-5-submitting-an-hpc-job" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 5: Submitting an HPC job
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 5: Submitting an HPC job">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifying-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-a-submission-script-for-slurm" class="md-nav__link">
    <span class="md-ellipsis">
      Writing a submission script for SLURM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-submission" class="md-nav__link">
    <span class="md-ellipsis">
      Job submission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Job monitoring
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-more-computing-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Using more computing resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-6-final-questions-and-report-submission" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Part 6: Final questions and report submission
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Part 6: Final questions and report submission">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#final-submission" class="md-nav__link">
    <span class="md-ellipsis">
      Final submission ⚠️
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      🔵 Additional Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔵 Additional Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-help" class="md-nav__link">
    <span class="md-ellipsis">
      Getting help
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dont-fall-behind-self-learning-materials" class="md-nav__link">
    <span class="md-ellipsis">
      Don't Fall Behind: Self-learning Materials
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="command-line-environment-on-hpc">Command Line Environment on HPC</h1>
<ul>
<li>Author: <a href="https://luxdem.uni.lu/team/xbesseron/">Xavier Besseron</a> (<a href="https://uni.lu/">University of Luxembourg</a>)</li>
<li>License: ©2024 <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></li>
<li>Date of practical: Tuesday 20th of February 2024</li>
</ul>
<h2 id="introduction">🔵 Introduction</h2>
<p>This course on <strong>HPC Software Environment</strong> aims to provide you with a comprehensive understanding of the software environment used in High-Performance Computing (HPC) from the perspective of application developers and users. It covers aspects related to application development, software deployment and execution of HPC workflows.</p>
<p>During the semester, you will have the opportunity the learn about and get familiar with numerous tools that will make you an HPC power user.
The practicals proposed over the semester will be carried out on the <strong>Uni.lu HPC platform</strong> and make intensive use of the <strong>command line</strong> and <strong>Git</strong>.</p>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>The content of this practical is considered a <strong>technical requirement</strong> for the rest of this course. If have difficulties carrying out the exercises, it is strongly advised that you check the "Additional Resources" and study them carefully.</p>
</div>
<h3 id="objectives">Objectives</h3>
<p>The objective of this practical is to ensure that you master the technical requirements in preparation for the rest of the semester:</p>
<ul>
<li>Connect to the Uni.lu HPC platform</li>
<li>Use the command line interface</li>
<li>Get compute nodes and submit jobs</li>
<li>Work with Git</li>
<li>Transfer files between your personal computer and the HPC</li>
</ul>
<p>The exercises will also refer to external documentation and instructions that need to be consulted. 
The aim is for you to be independent and work in 'real conditions' by finding the information you need to complete the task.</p>
<p><img alt="HPC User Point of View" class="center" src="../images/hpc_user_pov.png" /></p>
<h3 id="instructions">Instructions</h3>
<p>This practical is an <strong>individual work</strong> to be carried out on the <strong>Aion cluster</strong> of the HPC platform of the University of Luxembourg.</p>
<p>It is composed of different elements:</p>
<ul>
<li>this page that contains <strong>step-by-step instructions and questions</strong>;</li>
<li>the <strong>GitHub Classroom repository</strong> that contains the materials for the exercises;</li>
<li>the <strong>report</strong> that you have to submit via GitHub Classroom with the rest of the requested documents</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Important: Uni.lu HPC Account</p>
<p>It is assumed that you have an account on the Uni.lu HPC and that you know already how to access the platform.</p>
<p>If needed, <a href="https://hpc-docs.uni.lu/accounts/#how-to-get-an-new-user-account">How to Get a New User account?</a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Important: GitHub Account</p>
<p>This practical and the following ones will rely on GitHub Classroom to download the materials and submit your results and thus it requires a GitHub account.
If you don't have a GitHub account, you can sign up <a href="https://github.com/signup">here</a>.</p>
</div>
<h3 id="report">Report</h3>
<p>Together with this tutorial, you need to prepare a short report of your work:</p>
<ul>
<li>There is no template, you can start from a blank document. Keep it simple, clear and well-organized.</li>
<li>Make sure you answer all the questions (cf below), with text, code or screenshots.</li>
<li>Prepare your report at the same time you're doing the exercises.</li>
<li>Submit your report as a PDF file to your GitHub Classroom repository and <strong>push it before the deadline</strong>.</li>
</ul>
<div class="admonition question">
<p class="admonition-title">Question 1</p>
<p>Indicate at the beginning of your report:</p>
<ul>
<li>the title of the practical</li>
<li>your full name</li>
<li>your Uni.lu HPC username</li>
<li>your GitHub username</li>
<li>the date</li>
</ul>
</div>
<hr />
<h2 id="part-1-accessing-the-hpc-platform">🔵 Part 1: Accessing the HPC platform</h2>
<p>In this part, the goal is to connect to the HPC platform from your personal computer.
This can be a bit complicated the first time but it should become pretty smooth once everything is properly configured.</p>
<p>It is assumed that you previously used the HPC of the University so this should be a problem.</p>
<h3 id="setup-of-ssh-access">Setup of SSH Access</h3>
<p>Getting access to the Uni.lu HPC usually requires the following steps that have to be done once for all:</p>
<ul>
<li><a href="https://hpc-docs.uni.lu/accounts/#how-to-get-an-new-user-account">Getting an account</a></li>
<li><a href="https://hpc-docs.uni.lu/connect/ssh/#installation">Installing an SSH client</a></li>
<li><a href="https://hpc-docs.uni.lu/connect/ssh/#ssh-key-generation">Creating an SSH key</a></li>
<li><a href="https://hpc-docs.uni.lu/connect/ipa/#upload-your-ssh-key-on-the-ulhpc-identity-management-portal">Uploading your public SSH key</a></li>
<li><a href="https://hpc-docs.uni.lu/connect/ssh/#ssh-configuration">Setting up your SSH configuration</a></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Working on Linux or MacOS is a great advantage for this as most of the tools are already available and follow the standard configuration. </p>
<p>If you work on Windows, it is recommended to install <a href="https://learn.microsoft.com/en-us/windows/wsl/about">Windows Subsystem for Linux (WSL)</a> 
and set up an <a href="https://apps.microsoft.com/detail/9PN20MSR04DW?hl=en-US&amp;gl=US">Ubuntu subsystem from the Microsoft Store</a>. 
Thus, you can directly work on Linux within Windows.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This configuration is important as you will make use of it throughout the semester. 
Without it, it will be impossible to carry out the work of this course.</p>
</div>
<details class="info">
<summary>Guidelines to Handle Your SSH Keys</summary>
<p>Handling SSH Keys can be confusing and intimidating at first. 
It is about security and it should be taken seriously when all the devices are connected to the Internet. Here are a few guidelines:</p>
<ul>
<li>The term "pair of SSH keys" refers to the <strong>public and private keys</strong> associated together. </li>
<li>The private key is meant to be <strong>private</strong>: Never share it with anyone! Don't send it by email! (not even to yourself) Don't put it on a Cloud drive (Dropbox, Google Drive, MS OneDrive, etc.). </li>
<li>Generate one pair of keys for each of your account@machine. Don't try to copy your keys around. It makes it easier to block an access if it gets compromised.</li>
<li>Protect your SSH key with a passphrase. Without that, if your laptop gets stolen, your accesses to remote machines get compromised too! Instead, learn to use SSH Agent so you need to type your passphrase only once after booting your laptop.</li>
<li>You're not allowed to share your HPC access with another person. If you need to do it for some reason (e.g. debugging issues specific to your account), you should NOT share your private SSH key. Instead, you should authorize the SSH public of the other person to access your account (via IPA or <code>.ssh/authorized_keys</code>)</li>
</ul>
</details>
<h3 id="connection-to-hpc-access">Connection to HPC Access</h3>
<p>When using a supercomputer, you will usually first connect to a front-end or <strong>access node</strong>. 
From this machine, you can check your files, disk quota and computing usage. 
It is intended to be used by the user to prepare his computing job and scripts and then submit them to the job scheduler.</p>
<p>Because the access node is shared by all the users of the platform, 
it should not be used to compile and install your software and it should definitely not be used to run any memory or computing-intensive task.</p>
<p>This is an excerpt of the <a href="https://hpc.uni.lu/download/documents/Uni.lu-HPC-Facilities_Acceptable-Use-Policy_v2.1.pdf">Acceptable Use Policy of Uni.lu HPC</a> that you accepted to get an account on the platform:</p>
<blockquote>
<p>The frontend (access) nodes of the UL HPC clusters are reserved for data transfer
to/from the clusters, preparation of job submissions to the queueing system and
checking the status of computational jobs. The frontend nodes must not be used for
compute or I/O bound processes. Processes inappropriate to execute on the access
nodes may be killed and the user notified.</p>
</blockquote>
<p>Usually, there are some guardrails implemented on the access mode to prevent unwanted usage. For example, there is no compiler installed or the <code>module</code> command is not available.</p>
<p>If you configure your access correctly, connecting to the access node of the Aion cluster should be straightforward.</p>
<div class="highlight"><pre><span></span><code>ssh<span class="w"> </span>aion-cluster
</code></pre></div>
<p>Alternatively, you can connect to the Iris cluster with this command:</p>
<div class="highlight"><pre><span></span><code>ssh<span class="w"> </span>iris-cluster
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In the example above, <code>aion-cluster</code> does not name a specific machine. 
Instead, it refers to an entry in the SSH config file that defines a set of configuration items, like the <strong>hostname</strong> (actual address on the internet), 
the <strong>port</strong> of the SSH service and your <strong>username</strong>, so you don't need to remember them and enter them every time. </p>
</div>
<p>If the connection is successful, you should see something like this:</p>
<p><img alt="Login to Aion access node" class="center" src="../images/connection_aion.png" /></p>
<p>The shell prompt (last line on the terminal) should indicate that you're correctly connected to the Aion cluster.</p>
<details class="failure">
<summary>Failing to connect?</summary>
<p>If you fail to connect, don't panic! Instead look for clues that would indicate the reason of the failure:</p>
<ol>
<li>Any error message? Check carefully all the output lines on your terminal, and try to address the first one.</li>
<li>Need more information from SSH? Add the <code>-v</code> option (like verbose) after the <code>ssh</code> command. That will give you more details about the connect process. You can add more <code>v</code> to get more detailed messages.</li>
<li>Call me ! 👨‍🏫 This time I will help you getting this right, next time you're on your own 🙂</li>
</ol>
</details>
<p>You made it! You're connected to the HPC of the University of Luxembourg.</p>
<hr />
<h2 id="part-2-exploring-the-command-line-and-the-shell">🔵 Part 2: Exploring the command line and the shell</h2>
<p>It is time to explore your user account. Try these different commands:</p>
<ul>
<li>Who are you? <code>whoami</code>, <code>echo $USER</code>, <code>id</code></li>
<li>Who is connected? <code>who</code></li>
<li>What time is it? <code>date</code></li>
<li>On what computer are you? <code>hostname</code>, <code>uname -a</code>, <code>lsb_release -a</code></li>
<li>Where are you on the computer? <code>pwd</code></li>
</ul>
<p>For the commands you don't know, take the time to check what they do. For example, <code>whatis who</code>, <code>who --help</code> or <code>man who</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question 2</p>
<p>Enter commands to show </p>
<ol>
<li>your username</li>
<li>the machine on which you're connected</li>
<li>the date</li>
<li>the current working directory</li>
</ol>
<p>Take a screenshot and add it to your report 📸</p>
</div>
<h3 id="about-files-directories-and-storage-usage">About files, directories and storage usage</h3>
<p>A few more commands to try:</p>
<ul>
<li>List the files with <code>ls</code> and <code>ls -l</code></li>
<li>Explore the directories with <code>cd</code></li>
<li>Do you know the command <code>tree -d</code>? Check the man page to understand what it does <code>man tree</code>.</li>
<li>To know your storage usage and quota: <code>df-ulhpc</code>. It is an enhanced version of the <code>df</code> tool specific to the Uni.lu HPC.</li>
<li>To know more about the size of specific files and directories, you can use <code>du</code> or <code>ncdu</code>. For example, try <code>du -sh ~</code> and <code>ncdu ~</code> to know about your home directory.</li>
</ul>
<details class="info">
<summary>Disk usage and number of files</summary>
<p>In Linux, understanding disk usage and number of inodes is crucial for managing your filesystem effectively.</p>
<p><strong>Disk Usage:</strong></p>
<ul>
<li>Represents the actual physical space occupied by your files and folders.</li>
<li>Measured in units like kilobytes (KB), megabytes (MB), gigabytes (GB), etc.</li>
<li>You can check disk usage with commands like <code>df</code>, <code>du</code> or <code>df-ulhpc</code>.</li>
</ul>
<p><strong>Number of Inodes:</strong></p>
<ul>
<li>Represents the number of entries available to store information about files and directories, even if they're empty.</li>
<li>Think of it like unique IDs for each file/folder, similar to house numbers.</li>
<li>Fixed when the filesystem is created, cannot be changed dynamically.</li>
<li>Check inode usage with <code>df -i</code>, <code>du --inodes</code> or <code>df-ulhpc -i</code>.</li>
</ul>
</details>
<h3 id="type-of-commands-and-files">Type of commands and files</h3>
<p>The shell is the program that reads the command line typed by the user, executes it and displays the output.
Bash commands fall into four main categories:</p>
<ol>
<li>Builtins: These are built-in functionalities of the Bash shell itself, like <code>cd</code> or <code>echo</code>. They are fast and readily available without needing separate files or definitions.</li>
<li>Aliases: These are user-defined shortcuts for longer or more complex commands. For example, you could create an alias <code>ll</code> to run <code>ls -l</code> for a detailed directory listing. Aliases are simple and convenient but offer limited functionality.</li>
<li>Functions: These are more elaborate user-defined commands, similar to mini-programs within your shell. They can accept arguments, perform calculations, and even call other commands. Functions provide more control and reusability than aliases.</li>
<li>Files: Any executable file can be executed as a command. This includes shell scripts, compiled programs, or even plain text files with appropriate permissions. Files offer maximum flexibility but require creation and proper setup.</li>
</ol>
<p>To understand the type of a command, you can use</p>
<ul>
<li><code>type</code> to determine the type of a command</li>
<li><code>file</code> to determine the type of a file</li>
<li><code>which</code> to see the full path of a command</li>
</ul>
<div class="admonition question">
<p class="admonition-title">Question 3</p>
<p>Find the type, and if applicable the file type, of the following commands: <code>history</code>, <code>echo</code>, <code>cp</code>, <code>srun</code>, <code>si</code>, <code>python3</code>, <code>less</code>, <code>zless</code>, and <code>aionstat</code>.</p>
</div>
<hr />
<h2 id="part-3-setting-up-git-and-downloading-the-materials">🔵 Part 3: Setting up Git and downloading the materials</h2>
<p>This practical relies on Git Classroom to distribute the extra materials and for the submission of the report.</p>
<p>To create your copy of the repository, follow the invitation link and accept the assignment:</p>
<ul>
<li><strong>Assignment link:</strong> <a href="https://classroom.github.com/a/i8EMSXuK">https://classroom.github.com/a/i8EMSXuK</a></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Accessing GitHub from the Uni.lu HPC</p>
<p>To be able to clone, pull and push your GitHub repository from the Uni.lu HPC, you need to configure your SSH keys. </p>
<ol>
<li>Generate a new SSH key on the HPC (if necessary). Normally, you already have one named <code>~/.ssh/id_ecdsa.pub</code></li>
<li>Add it to your GitHub account, in the <a href="https://github.com/settings/keys">Settings -&gt; SSH and GPG Keys page</a></li>
</ol>
<p>If needed, follow the instructions in the GitHub documentation <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account">Adding a new SSH key to your GitHub account</a></p>
</div>
<details class="tip">
<summary>Organize your files: Create directories and subdirectories in your Home directory!</summary>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>MHPC-HPC_Software_Environment
<span class="nb">cd</span><span class="w"> </span>MHPC-HPC_Software_Environment
mkdir<span class="w"> </span>Practical_W01
<span class="nb">cd</span><span class="w"> </span>Practical_W01
</code></pre></div>
</details>
<p>Once you have accepted the assignment and configured your GitHub account, you can clone your repository in the Home directory of the cluster.</p>
<p><div class="highlight"><pre><span></span><code><span class="c1"># Don&#39;t forget to replace your GitHub username</span>
git<span class="w"> </span>clone<span class="w"> </span>git@github.com:MHPC-HPCSoftwareEnvironment/w01-command-line-environment-on-hpc-GITHUBUSERNAME.git
</code></pre></div>
Then you can check the content of the directory:</p>
<p><img alt="Content the GitHub repository" class="center" src="../images/github-repo-ls.png" /></p>
<details class="failure">
<summary>Failing to clone?</summary>
<p>If you fail to clone your GitHub repository, check carefully the error messages.</p>
<ul>
<li><code>ERROR: Repository not found</code>: Most likely you forgot to replace <code>GITHUBUSERNAME</code> in the command line above. Possibly, you do not accept the assignment after click the GitHub Classroom link.</li>
<li><code>Permission Denied</code>: You need to grant access to your GitHub repositories from your Uni.lu HPC account. Check the instruction above in "Accessing GitHub from the Uni.lu HPC".</li>
</ul>
</details>
<h3 id="first-commit-and-push">First commit and push</h3>
<p>Let's make sure that your configuration is working.</p>
<ol>
<li>Go to the directory of your GitHub Classroom;</li>
<li>Edit the <code>README.md</code> file, with your favorite text editor</li>
<li>Add your name at the top, for example, <code>Student: Firstname Lastname</code></li>
<li>Save and exit the text editor</li>
<li>Add the modification to Git: <code>git add README.md</code></li>
<li>Commit the changes with <code>git commit</code> and set a descriptive message</li>
<li>Push your changes to GitHub using <code>git push</code></li>
</ol>
<p>Check your GitHub repository online to make sure this was successful:
<a href="https://github.com/MHPC-HPCSoftwareEnvironment/w01-command-line-environment-on-hpc-XXX">https://github.com/MHPC-HPCSoftwareEnvironment/w01-command-line-environment-on-hpc-XXX</a></p>
<div class="admonition tip">
<p class="admonition-title">Editing files on the HPC</p>
<p>In a terminal environment, editing a file can appear complicated. Rather than download-edit-upload (which is cumbersome) or using a graphical editor (which can be slow), we usually prefer to use a <strong>terminal-based text editor</strong>.</p>
<p>There are widely known and adopted text editors available on the HPC:</p>
<ul>
<li><strong>Nano</strong>: A user-friendly editor designed for simplicity and ease of use, ideal for beginners or quick edits. To get started: <code>nano &lt;filename&gt;</code>.</li>
<li><strong>Vi/Vim</strong>: This powerful editor has a steep learning curve but offers immense customization and efficiency, making it a favorite among programmers and experienced users. To get started: <code>vim &lt;filename&gt;</code>.</li>
</ul>
<p>If you don't know what to pick, use <strong>Nano</strong>.</p>
</div>
<hr />
<h2 id="part-4-using-a-compute-node-interactively">🔵 Part 4: Using a compute node interactively</h2>
<h3 id="information-about-the-computing-platform">Information about the computing platform</h3>
<p>The documentation of Uni.lu HPC describes the available partitions and QoS defined on the cluster:</p>
<ul>
<li><a href="https://hpc-docs.uni.lu/slurm/partitions/">Uni.lu Slurm Partitions</a></li>
</ul>
<p><img alt="Uni.lu Slurm Partitions" src="../images/aion_partitions.png" /></p>
<ul>
<li><a href="https://hpc-docs.uni.lu/slurm/qos/">Uni.lu Slurm QOS</a></li>
</ul>
<p><img alt="Uni.lu Slurm QOS" src="../images/aion_qos.png" /></p>
<p>This information can be retrieved directly from the command line. 
In addition, it is also possible to get the status of the queue.</p>
<ul>
<li>Configuration of the partitions: <code>scontrol show partitions</code> </li>
<li>Configuration of the QoS: <code>sacctmgr show qos</code></li>
<li>View the jobs in the queue: <code>squeue</code></li>
</ul>
<p>The last command can be a bit verbose due to all the jobs running and pending on the cluster. It can be filtered using different command line options:</p>
<ul>
<li>Filter by users: <code>--user</code> or <code>-u</code></li>
<li>Filter by state: <code>--states</code> or <code>-t</code></li>
<li>Filter by partitions: <code>--partition</code> or <code>-p</code></li>
<li>Filter by QoS: <code>--qos</code> or <code>-q</code></li>
</ul>
<p>For example, <code>squeue -t RUNNING -p interactive</code> will display only the jobs currently running on the interactive partition.</p>
<div class="admonition question">
<p class="admonition-title">Question 4</p>
<p>What is the command to see your pending jobs?</p>
</div>
<details class="tip">
<summary>Tip</summary>
<p>The command <code>sq</code> command will only your jobs in the queue. This command is specific to the Uni.lu HPC platform.</p>
</details>
<h3 id="finding-your-reservation">Finding your reservation</h3>
<p>The HPC platform is shared by all its users. All users can submit jobs at any time.
There is no guarantee that a compute node will be available immediately for your job to be executed,
and you might have to wait in the queue for minutes, hours or even days for larger jobs.</p>
<p>To avoid this issue, compute nodes have been reserved for you and are available during the practical sessions of this course.</p>
<p>Use the command <code>scontrol show reservation</code> to see the reservations. Find the name (starting with <code>hpc_software_</code>) of the one available today for your usage.</p>
<p><img alt="SLURM Reservations" class="center" src="../images/slurm_reservations.png" /></p>
<p>By adding the <code>--reservation=hpc_software_XX</code> option to your SLURM commands, you will have access to a compute node immediately.</p>
<div class="admonition warning">
<p class="admonition-title">Keep in mind</p>
<p>The reservations are only valid for a given time, usually the duration of the practical session.</p>
<ul>
<li>During the practicals, use the reservations as those nodes are dedicated to you.</li>
<li>Outside the practical hours, you cannot use the reservations. Simply remove the <code>--reservation</code> option from the <code>salloc</code>/<code>sbatch</code> command line to access the compute nodes like every other user.</li>
</ul>
</div>
<h3 id="connection-to-a-compute-node">Connection to a compute node</h3>
<p>To use a compute node, we use the <code>salloc</code> command:</p>
<div class="highlight"><pre><span></span><code>salloc<span class="w"> </span>-p<span class="w"> </span>interactive<span class="w"> </span>--qos<span class="w"> </span>debug<span class="w"> </span>--reservation<span class="o">=</span>hpc_software_d20<span class="w"> </span>--time<span class="o">=</span><span class="m">1</span>:00:00
</code></pre></div>
<p>Once in the shell on the compute node, you can exit with the <code>exit</code> command or <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-d">D</kbd></span>.</p>
<p>Under the hood, <code>salloc</code> performs many operations:</p>
<ul>
<li>allocate CPUs on the available compute nodes</li>
<li>connect to the first node of the allocation</li>
<li>execute a shell by default</li>
<li>release the allocation once the shell exits</li>
</ul>
<p>It is a blocking process: the <code>salloc</code> finishes only once the shell running on the compute node is terminated. Furthermore, the partition <code>interactive</code> and the QoS <code>debug</code> request resources that are dedicated and adapted for interactive usage: a small number of resources for a short time but with a high priority.</p>
<p>Additional command line options can specified with <code>salloc</code>:</p>
<ul>
<li>Number of nodes: <code>-N</code> or <code>--nodes</code></li>
<li>Number of tasks or processes: <code>-n</code> or <code>--ntasks</code></li>
<li>Number of cores per process: <code>-c</code> or <code>--cpus-per-task</code></li>
<li>Time limit: <code>-t</code> or <code>--time</code></li>
</ul>
<details class="tip">
<summary>Tip</summary>
<p>The command <code>si</code> is a quick shortcut to get a compute interactively. This command is specific to the Uni.lu HPC platform.</p>
<p>More details are given in the <a href="https://hpc-docs.uni.lu/jobs/interactive/">documentation</a>.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question 5</p>
<p>Once connected to a compute node:</p>
<ul>
<li>How can you tell you're now connected to a compute node and not the access node?</li>
<li>What is the name of the compute node you're connected to?</li>
<li>Use the <code>sq</code> to see your job in the queue</li>
<li>What is your JOBID?</li>
<li>What is the total duration of your job?</li>
</ul>
<p>Add a screenshot of the relevant part of your terminal  📸</p>
</div>
<h3 id="finding-and-using-software">Finding and using software</h3>
<p>Once connected to a compute node, it is possible to look for the available software and use them with the <code>module</code> command. Try the following commands:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Overview of the available software</span>
module<span class="w"> </span>overview
<span class="c1"># List and version of available software</span>
module<span class="w"> </span>avail
</code></pre></div>
<details class="failure">
<summary>Error when executing <code>module</code>?</summary>
<p>The <code>module</code> command is not available on the access node to avoid running computing tasks on by mistake.</p>
<ul>
<li>Check that you are correctly connected to a compute node.</li>
</ul>
</details>
<p>With <code>module</code>, we can find and use a more recent GCC compiler:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Check the current GCC</span>
which<span class="w"> </span>gcc
gcc<span class="w"> </span>--version

<span class="c1"># Look for GCC compiler</span>
module<span class="w"> </span>avail<span class="w"> </span>compiler/GCC
<span class="c1"># Load the GCC module</span>
module<span class="w"> </span>load<span class="w"> </span>compiler/GCC/10.2.0
<span class="c1"># Check the loaded modules</span>
module<span class="w"> </span>list
<span class="c1"># Check the loaded GCC</span>
which<span class="w"> </span>gcc
gcc<span class="w"> </span>--version

<span class="c1"># Unload GCC</span>
module<span class="w"> </span>unload<span class="w"> </span>compiler/GCC/10.2.0
module<span class="w"> </span>list
<span class="c1"># Unload all modules</span>
module<span class="w"> </span>purge
module<span class="w"> </span>list
</code></pre></div>
<h3 id="running-a-parallel-application">Running a parallel application</h3>
<p>With this exercise, we will run a small parallel simulation of Computational Fluid Dynamics (CFD) using the OpenFOAM software. This toy example calculates the airflow around a motorbike.</p>
<p><img alt="OpenFOAM MotorBike Tutorial" class="center" src="../images/openfoam-motorbike.png" /></p>
<p>Let's make sure to allocate at least 6 CPU cores for this task.</p>
<div class="highlight"><pre><span></span><code>salloc<span class="w"> </span>-p<span class="w"> </span>interactive<span class="w"> </span>--qos<span class="w"> </span>debug<span class="w"> </span>--reservation<span class="o">=</span>hpc_software_d20<span class="w"> </span>--time<span class="o">=</span><span class="m">1</span>:00:00<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span>-c<span class="w"> </span><span class="m">6</span>
</code></pre></div>
<p>Find and load the OpenFOAM application, and set up the environment:</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>avail<span class="w"> </span>OpenFOAM
module<span class="w"> </span>load<span class="w"> </span>cae/OpenFOAM/8-foss-2020b
<span class="nb">source</span><span class="w"> </span><span class="nv">$FOAM_BASH</span>
</code></pre></div>
<p>Copy the simulation input files from the cloned Git repository. 
Make the copy outside the repository as it is not intended to be added to the repository</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>-r<span class="w"> </span>w01-command-line-environment-on-hpc-XXX/motorBike-INPUT/<span class="w"> </span>./motorBike-INTERACTIVE
<span class="nb">cd</span><span class="w"> </span>./motorBike-INTERACTIVE
</code></pre></div>
<p>Test the parallel execution of the simulation in an interactive mode:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Decompose the problem for parallel execution (specific to OpenFOAM)</span>
decomposePar

<span class="c1"># Run the OpenFOAM solver in parallel: 6 processes with 1 core each</span>
srun<span class="w"> </span>-n<span class="w"> </span><span class="m">6</span><span class="w"> </span>-c<span class="w"> </span><span class="m">1</span><span class="w"> </span>simpleFoam<span class="w"> </span>-parallel
</code></pre></div>
<p>The execution should last around 2 minutes. It will display a lot of output showing the progress of the simulation. If successful, it will end with the line <code>Finalising parallel run</code>. </p>
<p>Congratulation! You have executed a CFD parallel simulation on the HPC cluster of the University 🎉</p>
<p>You can now disconnect from the compute nodes using the <code>exit</code> command.</p>
<hr />
<h2 id="part-5-submitting-an-hpc-job">🔵 Part 5: Submitting an HPC job</h2>
<p>In this part, you will learn how to submit a passive job (also called batch).
These jobs are executed in the background when resources are available. There is no need to stay connected to the platform.</p>
<h3 id="specifying-resources">Specifying resources</h3>
<p>One of the key aspects of SLURM is the specification of resources. 
Many options allow to you describe with precision and flexibility the requirements for your parallel application.</p>
<p>This table summarizes the main options for <code>salloc</code>, <code>sbatch</code> and <code>srun</code>:</p>
<table>
<thead>
<tr>
<th>SLURM Option</th>
<th>SLURM Terminology</th>
<th>Usual Terminology</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--nodes</code> / <code>-N</code></td>
<td>Number of nodes</td>
<td>Number of compute nodes</td>
</tr>
<tr>
<td><code>--ntasks</code> / <code>-n</code></td>
<td>Number of tasks</td>
<td>Number of processes</td>
</tr>
<tr>
<td><code>--cpus-per-task</code> / <code>-c</code></td>
<td>Number of CPUs per task</td>
<td>Number of cores/threads per process</td>
</tr>
<tr>
<td><code>--ntasks-per-socket</code></td>
<td>Number of tasks per socket</td>
<td>Number of processes per physical CPU</td>
</tr>
<tr>
<td><code>--gpus</code> / <code>-G</code></td>
<td>Number of GPUs</td>
<td>Number of GPUs</td>
</tr>
</tbody>
</table>
<p>There are many other options available to specify the resource constraints in SLURM. Check the SLURM documentation or man pages for more details.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>SLURM uses sometimes a different terminology than the usual one. It is important to remember the main differences:</p>
<ul>
<li>A <strong>task</strong> in SLURM means a <strong>process</strong>.</li>
<li>A <strong>CPU</strong> in SLURM means a <strong>physical CPU core</strong>.</li>
<li>A <strong>socket</strong> in SLURM refers to a <strong>physical Socket</strong>, i.e., to the <strong>whole CPU or processor</strong>.</li>
</ul>
</div>
<h3 id="writing-a-submission-script-for-slurm">Writing a submission script for SLURM</h3>
<p>A batch job is submitted using the <code>sbatch</code> command and a script. SLURM interpret the resource constraints to schedule the job and when the resources are available, the script is executed.</p>
<p>The resource constraint can be specified on the command line after the <code>sbatch</code> command (similarly to what we have done for <code>salloc</code>) or inside the script using the <code>#SBATCH</code> keyword at the top of the script. It is also possible to use a combination of both, in which case the command line options take priority.</p>
<p>Now, we will write a submission script for the motorbike simulation that we tested earlier.
An example script is provided simulation input directory.</p>
<p>Let's first make a new copy of the input directory.</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>-r<span class="w"> </span>w01-command-line-environment-on-hpc-XXX/motorBike-INPUT/<span class="w"> </span>./motorBike-RUN-06
<span class="nb">cd</span><span class="w"> </span>./motorBike-RUN-06
</code></pre></div>
<p>Inside this directory, there is a script called <code>run_OpenFOAM_parallel.sh</code>. We will modify it and adapt it to our needs.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="ch">#!/bin/bash -l</span>
<span class="c1">#SBATCH --job-name motorbike</span>
<span class="c1">#SBATCH --time 0-00:10:00</span>
<span class="c1">#SBATCH --nodes 1</span>
<span class="c1">#SBATCH --ntasks 6</span>
<span class="c1">#SBATCH --cpus-per-task 1</span>
<span class="c1">#SBATCH --partition batch</span>
<span class="c1">#SBATCH --qos normal</span>
<span class="c1">#SBATCH --output SLURM_%x_%j.log</span>
<span class="c1">#SBATCH --error  SLURM_%x_%j.log</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;== Starting job </span><span class="si">${</span><span class="nv">SLURM_JOBID</span><span class="si">}</span><span class="s2"> at </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span>

<span class="c1"># Load OpenFOAM</span>
module<span class="w"> </span>load<span class="w"> </span>cae/OpenFOAM/8-foss-2020b
<span class="nb">source</span><span class="w"> </span><span class="nv">$FOAM_BASH</span>

<span class="c1"># Go to the working directory (UPDATE ME!)</span>
<span class="nb">cd</span><span class="w"> </span>/home/users/XXXXX/motorBike-RUN-06

<span class="c1"># Set the number of processes in OpenFOAM settings</span>
foamDictionary<span class="w"> </span>-entry<span class="w"> </span>numberOfSubdomains<span class="w"> </span>-set<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SLURM_NTASKS</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>system/decomposeParDict

<span class="c1"># Decompose the problem for parallel execution</span>
decomposePar

<span class="c1"># Run the OpenFOAM solver in parallel</span>
<span class="nb">time</span><span class="w"> </span>srun<span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SLURM_NTASKS</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>-c<span class="w"> </span><span class="m">1</span><span class="w"> </span>simpleFoam<span class="w"> </span>-parallel

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;== Finished job </span><span class="si">${</span><span class="nv">SLURM_JOBID</span><span class="si">}</span><span class="s2"> at </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
<p>Use your favorite text editor to edit the script:</p>
<ul>
<li>Change the working directory at line 19</li>
</ul>
<p>Read the script line by line to understand what it does. It is very similar to what we have done manually to run the parallel simulation.</p>
<h3 id="job-submission">Job submission</h3>
<p>The script submission is done using the simple <code>sbatch</code> command:
<div class="highlight"><pre><span></span><code>sbatch<span class="w"> </span>run_OpenFOAM_parallel.sh
</code></pre></div></p>
<p>However, to use the reserved nodes during the practical session, you should rather use:
<div class="highlight"><pre><span></span><code>sbatch<span class="w"> </span>--reservation<span class="o">=</span>hpc_software_d20<span class="w"> </span>run_OpenFOAM_parallel.sh
</code></pre></div></p>
<h3 id="job-monitoring">Job monitoring</h3>
<p>It is possible to monitor the execution of your job.</p>
<p>Before the job starts:</p>
<ul>
<li>Using <code>sq</code> will show the status of your job. The column <strong>ST</strong> indicates the state: <code>P</code> for pending, <code>R</code> for running.</li>
</ul>
<p>Once the job is running:</p>
<ul>
<li>The command <code>sq</code> will indicate on which compute node it is running. You can use SSH to connect directly to this node and monitor the processes. Try <code>top</code> or <code>htop</code> to monitor the CPU usage. </li>
<li>The terminal output of the execution is saved in the log file specified by the <code>--output</code> and <code>--error</code> options. Open this file with <code>less</code> or <code>tail -f</code> to see the progress of the execution.</li>
</ul>
<p>After the execution:</p>
<ul>
<li>The job will disappear from the <code>sq</code> output, which means the execution is completed (with or without errors). Check the log file to find out if the execution was successful.</li>
<li>At the end of the log file, there will be time indicated. It is the time spent in executing the parallel simulation, measured and displayed using the <code>time</code> command at line 28 of the script.</li>
</ul>
<p><img alt="End of the simulation output" class="center" src="../images/openfoam-run-time.png" /></p>
<h3 id="using-more-computing-resources">Using more computing resources</h3>
<p>Now, we want to run the simulation with more computing cores:</p>
<ol>
<li>Create two new directories from the initial input:<ul>
<li><code>motorBike-RUN-12</code> for an execution with 12 cores</li>
<li><code>motorBike-RUN-24</code> for an execution with 24 cores</li>
</ul>
</li>
<li>Modify the batch script in each directory:<ul>
<li>Don't forget to modify the number of processes and the working directory</li>
</ul>
</li>
<li>Submit the two jobs with <code>sbatch</code><ul>
<li>Monitor the executions to ensure it is successful</li>
</ul>
</li>
</ol>
<div class="admonition question">
<p class="admonition-title">Question 6</p>
<ul>
<li>Collect the execution time of the parallel simulations for 6, 12 and 24 cores. </li>
<li>In your report, create a table with 3 columns: <em>SLURM JOBID</em>, <em>Execution Time</em> and <em>Name of the file log</em>.</li>
<li>Copy the three log files in the Git Classroom repository you have cloned. Put them in the <code>logs</code> sub-directory. Don't forget to commit and push.</li>
</ul>
</div>
<hr />
<h2 id="part-6-final-questions-and-report-submission">🔵 Part 6: Final questions and report submission</h2>
<p>For the last question, I would like to know about your background.</p>
<div class="admonition question">
<p class="admonition-title">Question 7</p>
<p>Please answer with one line/sentence to each question:</p>
<ul>
<li>What Operating System(s) do you use on your personal laptop and/or workstation?</li>
<li>Are you familiar with Linux and the Command Line? For how long?</li>
<li>What programming languages do you know? What level? (beginner, medium, expert)</li>
<li>
<p>Do you know MPI, OpenMP, CUDA? Or any other parallel programming model?</p>
</li>
<li>
<p>Why did you choose the Master in HPC?</p>
</li>
</ul>
</div>
<h3 id="final-submission">Final submission ⚠️</h3>
<p>Don't forget to add and push all the required files to your GitHub Classroom repository:</p>
<ul>
<li>the log files of question 6;</li>
<li>the report, including the answers to all the questions and the screenshots.</li>
</ul>
<p>Finalize your report and save it as a PDF (no other format allowed!) in the <code>report</code> sub-directory of your GitHub Classroom repository. </p>
<details class="tip">
<summary>Uploading your report</summary>
<p>You don't need to copy it to the HPC to upload your report. Instead, you can use the <strong>Add file</strong> button directly on the GitHub webpage.</p>
</details>
<div class="admonition danger">
<p class="admonition-title">Files Submission</p>
<p>Your files and report are considered submitted once they are pushed to your repository. </p>
<p>Check your GitHub repository online to make sure:
<a href="https://github.com/MHPC-HPCSoftwareEnvironment/w01-command-line-environment-on-hpc-XXX">https://github.com/MHPC-HPCSoftwareEnvironment/w01-command-line-environment-on-hpc-XXX</a></p>
<p>Passed the deadline at <strong>25/02/2024 23h59</strong> you won't be able to push anymore.</p>
</div>
<hr />
<h2 id="additional-resources">🔵 Additional Resources</h2>
<h3 id="getting-help">Getting help</h3>
<p>Uni.lu HPC Tutorials and Documentation:</p>
<ul>
<li><a href="https://hpc-docs.uni.lu/getting-started/">Getting Started on Uni.lu HPC</a> </li>
<li><a href="https://ulhpc-tutorials.readthedocs.io/en/latest/basic/scheduling/">Job scheduling with SLURM</a></li>
</ul>
<p>Online Documentation:</p>
<ul>
<li><a href="https://www.gnu.org/software/bash/manual/bash.html">Bash Reference Manual</a></li>
<li><a href="https://man.cx/">Manpages</a></li>
<li><a href="https://git-scm.com/docs">Git Reference Manual</a></li>
<li><a href="https://slurm.schedmd.com/documentation.html">SLURM Documentation</a></li>
<li><a href="https://lmod.readthedocs.io/en/latest/010_user.html#user-s-tour-of-the-module-command">User’s Tour of the Module Command</a></li>
</ul>
<p>Books:</p>
<ul>
<li><a href="https://www.a-z.lu/discovery/fulldisplay?docid=alma9922863836407251&amp;context=L&amp;vid=352LUX_BIBNET_NETWORK:BIBNET_UNION&amp;search_scope=DN_and_CI&amp;tab=DiscoveryNetwork&amp;lang=fr">Kochan and Wood, Shell Programming in Unix, Linux and OS X</a></li>
</ul>
<h3 id="dont-fall-behind-self-learning-materials">Don't Fall Behind: Self-learning Materials</h3>
<p>Linux and Command Line:</p>
<ul>
<li><a href="https://hpc-wiki.info/hpc/Introduction_to_Linux_in_HPC">Introduction to Linux in HPC</a> on HPC Wiki</li>
<li><a href="https://swcarpentry.GitHub.io/shell-novice/">The Unix Shell</a> on Software Carpentry</li>
</ul>
<p>Terminal-based Text Editors:</p>
<ul>
<li><a href="https://www.freecodecamp.org/news/vim-beginners-guide/">How to Use Vim – Tutorial for Beginners</a> on freeCodeCamp</li>
<li><a href="https://itsfoss.com/nano-editor-guide/">Beginner's Guide to Nano Text Editor</a></li>
</ul>
<p>Git and GitHub:</p>
<ul>
<li><a href="https://swcarpentry.GitHub.io/git-novice/">Version Control with Git</a> on Software Carpentry</li>
<li><a href="https://www.datacamp.com/tutorial/github-and-git-tutorial-for-beginners">GitHub and Git Tutorial for Beginners</a> on DataCamp</li>
</ul>
<p>HPC Tools and Environment:</p>
<ul>
<li><a href="https://ulhpc-tutorials.readthedocs.io/en/latest/basic/scheduling/">Job scheduling with SLURM</a> on Uni.lu HPC</li>
<li><a href="https://ulhpc-tutorials.readthedocs.io/en/latest/tools/cli/modules/">Using software modules</a> on Uni.lu HPC</li>
</ul>







  
  




  



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.e1c3ead8.min.js"></script>
      
        <script src="../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>